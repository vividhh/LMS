import re
from urllib import response
from django.shortcuts import render, redirect
from django.contrib.auth.models import auth, User 
from django.contrib import messages

from lms.serializers import BooksSerializer
from .models import Books, Orders, Member
from django.contrib.auth.decorators import login_required
from django.views import View
from rest_framework.views import APIView
from rest_framework import status
from rest_framework.response import Response



class BooksView(APIView):
    def get(self,request):
        book_name= Books.objects.all()
        serializer = BooksSerializer(book_name, many = True)
        return Response({"status": "success", "data": serializer.data}, status=status.HTTP_200_OK)

    def post(self, request):
        bookname = request.POST['bookname']
        author = request.POST['author']
        price = request.POST['price']
        genre = request.POST['genre']
        image = request.FILES['image']